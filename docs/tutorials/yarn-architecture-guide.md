# YARNèµ„æºç®¡ç†æ¶æ„æŒ‡å—

## æ¦‚è¿°

YARNï¼ˆYet Another Resource Negotiatorï¼‰æ˜¯Hadoop 2.0å¼•å…¥çš„èµ„æºç®¡ç†ç³»ç»Ÿï¼Œå®ƒå°†èµ„æºç®¡ç†å’Œä½œä¸šè°ƒåº¦åˆ†ç¦»ï¼Œä½¿Hadoopèƒ½å¤Ÿæ”¯æŒæ›´å¤šç±»å‹çš„åº”ç”¨ç¨‹åºï¼Œä¸ä»…ä»…æ˜¯MapReduceã€‚

## YARNçš„è¯ç”ŸèƒŒæ™¯

### Hadoop 1.xçš„å±€é™æ€§

åœ¨Hadoop 1.xä¸­ï¼ŒJobTrackeræ‰¿æ‹…äº†å¤ªå¤šèŒè´£ï¼š
- **èµ„æºç®¡ç†**: ç®¡ç†é›†ç¾¤ä¸­çš„è®¡ç®—èµ„æº
- **ä½œä¸šè°ƒåº¦**: å†³å®šä½œä¸šçš„æ‰§è¡Œé¡ºåº
- **ä½œä¸šç›‘æ§**: ç›‘æ§ä½œä¸šçš„æ‰§è¡ŒçŠ¶æ€
- **ä»»åŠ¡è°ƒåº¦**: å°†ä»»åŠ¡åˆ†é…ç»™TaskTracker

è¿™ç§è®¾è®¡å¯¼è‡´äº†ä»¥ä¸‹é—®é¢˜ï¼š
1. **å•ç‚¹æ•…éšœ**: JobTrackeræ•…éšœä¼šå¯¼è‡´æ•´ä¸ªé›†ç¾¤ä¸å¯ç”¨
2. **æ‰©å±•æ€§é™åˆ¶**: å•ä¸ªJobTrackeréš¾ä»¥ç®¡ç†å¤§è§„æ¨¡é›†ç¾¤
3. **èµ„æºåˆ©ç”¨ç‡ä½**: é™æ€çš„slotåˆ†é…å¯¼è‡´èµ„æºæµªè´¹
4. **åªæ”¯æŒMapReduce**: æ— æ³•è¿è¡Œå…¶ä»–ç±»å‹çš„åº”ç”¨

### YARNçš„è§£å†³æ–¹æ¡ˆ

YARNé€šè¿‡ä»¥ä¸‹æ–¹å¼è§£å†³äº†è¿™äº›é—®é¢˜ï¼š
- **èŒè´£åˆ†ç¦»**: å°†èµ„æºç®¡ç†å’Œä½œä¸šè°ƒåº¦åˆ†ç¦»
- **å¤šåº”ç”¨æ”¯æŒ**: æ”¯æŒMapReduceã€Sparkã€Flinkç­‰å¤šç§åº”ç”¨
- **åŠ¨æ€èµ„æºåˆ†é…**: æ ¹æ®éœ€æ±‚åŠ¨æ€åˆ†é…èµ„æº
- **é«˜å¯ç”¨æ€§**: æ”¯æŒResourceManagerçš„é«˜å¯ç”¨é…ç½®

## YARNæ¶æ„ç»„ä»¶

### YARNæ•´ä½“æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        YARN é›†ç¾¤æ¶æ„                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Client                                                         â”‚
â”‚    â”‚                                                            â”‚
â”‚    â”‚ 1. æäº¤åº”ç”¨                                                  â”‚
â”‚    â–¼                                                            â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚                ResourceManager (RM)                        â”‚ â”‚
â”‚ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚ â”‚  â”‚   Scheduler     â”‚    â”‚    ApplicationsManager         â”‚ â”‚ â”‚
â”‚ â”‚  â”‚                 â”‚    â”‚                                 â”‚ â”‚ â”‚
â”‚ â”‚  â”‚ â€¢ FIFO         â”‚    â”‚ â€¢ åº”ç”¨æäº¤å¤„ç†                   â”‚ â”‚ â”‚
â”‚ â”‚  â”‚ â€¢ Capacity     â”‚    â”‚ â€¢ AMå¯åŠ¨ç®¡ç†                    â”‚ â”‚ â”‚
â”‚ â”‚  â”‚ â€¢ Fair         â”‚    â”‚ â€¢ åº”ç”¨çŠ¶æ€è·Ÿè¸ª                   â”‚ â”‚ â”‚
â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                              â”‚                                  â”‚
â”‚                              â”‚ 2. å¯åŠ¨AM                        â”‚
â”‚                              â–¼                                  â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚                    NodeManager 1                           â”‚ â”‚
â”‚ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚ â”‚  â”‚ ApplicationMasterâ”‚    â”‚        Containers              â”‚ â”‚ â”‚
â”‚ â”‚  â”‚                 â”‚    â”‚                                 â”‚ â”‚ â”‚
â”‚ â”‚  â”‚ â€¢ èµ„æºåå•†       â”‚    â”‚ â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”        â”‚ â”‚ â”‚
â”‚ â”‚  â”‚ â€¢ ä»»åŠ¡è°ƒåº¦       â”‚    â”‚ â”‚Task1â”‚ â”‚Task2â”‚ â”‚Task3â”‚        â”‚ â”‚ â”‚
â”‚ â”‚  â”‚ â€¢ è¿›åº¦ç›‘æ§       â”‚    â”‚ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜        â”‚ â”‚ â”‚
â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                 â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚                    NodeManager 2                           â”‚ â”‚
â”‚ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚ â”‚  â”‚                    Containers                          â”‚ â”‚ â”‚
â”‚ â”‚  â”‚                                                         â”‚ â”‚ â”‚
â”‚ â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”                      â”‚ â”‚ â”‚
â”‚ â”‚  â”‚ â”‚Task4â”‚ â”‚Task5â”‚ â”‚Task6â”‚ â”‚Task7â”‚                      â”‚ â”‚ â”‚
â”‚ â”‚  â”‚ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜                      â”‚ â”‚ â”‚
â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                 â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚                    NodeManager N                           â”‚ â”‚
â”‚ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚ â”‚  â”‚                    Containers                          â”‚ â”‚ â”‚
â”‚ â”‚  â”‚                                                         â”‚ â”‚ â”‚
â”‚ â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”                               â”‚ â”‚ â”‚
â”‚ â”‚  â”‚ â”‚TaskXâ”‚ â”‚TaskYâ”‚ â”‚TaskZâ”‚                               â”‚ â”‚ â”‚
â”‚ â”‚  â”‚ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜                               â”‚ â”‚ â”‚
â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1. ResourceManager (RM)

ResourceManageræ˜¯YARNçš„æ ¸å¿ƒç»„ä»¶ï¼Œè´Ÿè´£æ•´ä¸ªé›†ç¾¤çš„èµ„æºç®¡ç†ã€‚

#### ResourceManagerå†…éƒ¨æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ResourceManager                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚   Client API    â”‚              â”‚    Admin API           â”‚â”‚
â”‚  â”‚                 â”‚              â”‚                         â”‚â”‚
â”‚  â”‚ â€¢ åº”ç”¨æäº¤       â”‚              â”‚ â€¢ é˜Ÿåˆ—ç®¡ç†               â”‚â”‚
â”‚  â”‚ â€¢ çŠ¶æ€æŸ¥è¯¢       â”‚              â”‚ â€¢ èŠ‚ç‚¹ç®¡ç†               â”‚â”‚
â”‚  â”‚ â€¢ åº”ç”¨æ§åˆ¶       â”‚              â”‚ â€¢ é…ç½®åˆ·æ–°               â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚           â”‚                                   â”‚              â”‚
â”‚           â–¼                                   â–¼              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚              ApplicationsManager                       â”‚ â”‚
â”‚  â”‚                                                         â”‚ â”‚
â”‚  â”‚ â€¢ åº”ç”¨æäº¤éªŒè¯     â€¢ AMå¯åŠ¨ç®¡ç†     â€¢ åº”ç”¨çŠ¶æ€è·Ÿè¸ª        â”‚ â”‚
â”‚  â”‚ â€¢ å®‰å…¨è®¤è¯         â€¢ AMæ•…éšœæ¢å¤     â€¢ åº”ç”¨å†å²è®°å½•        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                              â”‚                              â”‚
â”‚                              â–¼                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                    Scheduler                           â”‚ â”‚
â”‚  â”‚                                                         â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚  â”‚FIFOè°ƒåº¦å™¨   â”‚  â”‚å®¹é‡è°ƒåº¦å™¨   â”‚  â”‚å…¬å¹³è°ƒåº¦å™¨       â”‚  â”‚ â”‚
â”‚  â”‚  â”‚             â”‚  â”‚             â”‚  â”‚                 â”‚  â”‚ â”‚
â”‚  â”‚  â”‚â€¢ ç®€å•é˜Ÿåˆ—   â”‚  â”‚â€¢ å¤šé˜Ÿåˆ—æ”¯æŒ â”‚  â”‚â€¢ å…¬å¹³å…±äº«       â”‚  â”‚ â”‚
â”‚  â”‚  â”‚â€¢ å…ˆè¿›å…ˆå‡º   â”‚  â”‚â€¢ èµ„æºä¿è¯   â”‚  â”‚â€¢ æŠ¢å æœºåˆ¶       â”‚  â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                              â”‚                              â”‚
â”‚                              â–¼                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚              Resource Tracker                          â”‚ â”‚
â”‚  â”‚                                                         â”‚ â”‚
â”‚  â”‚ â€¢ èŠ‚ç‚¹èµ„æºç›‘æ§     â€¢ å¿ƒè·³å¤„ç†       â€¢ èµ„æºçŠ¶æ€æ›´æ–°      â”‚ â”‚
â”‚  â”‚ â€¢ èŠ‚ç‚¹å¥åº·æ£€æŸ¥     â€¢ å®¹å™¨åˆ†é…       â€¢ é›†ç¾¤èµ„æºç»Ÿè®¡      â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### ä¸»è¦åŠŸèƒ½
- **èµ„æºåˆ†é…**: æ ¹æ®åº”ç”¨éœ€æ±‚åˆ†é…é›†ç¾¤èµ„æº
- **åº”ç”¨ç®¡ç†**: ç®¡ç†åº”ç”¨çš„ç”Ÿå‘½å‘¨æœŸ
- **è°ƒåº¦å†³ç­–**: å†³å®šèµ„æºåˆ†é…ç»™å“ªä¸ªåº”ç”¨
- **æ•…éšœæ¢å¤**: å¤„ç†NodeManagerå’ŒApplicationMasterçš„æ•…éšœ

#### æ ¸å¿ƒå­ç»„ä»¶

##### Schedulerï¼ˆè°ƒåº¦å™¨ï¼‰
```
è°ƒåº¦å™¨ç±»å‹ï¼š
â”œâ”€â”€ FIFO Schedulerï¼ˆå…ˆè¿›å…ˆå‡ºï¼‰
â”‚   â”œâ”€â”€ ç®€å•çš„é˜Ÿåˆ—è°ƒåº¦
â”‚   â””â”€â”€ é€‚ç”¨äºå°é›†ç¾¤
â”œâ”€â”€ Capacity Schedulerï¼ˆå®¹é‡è°ƒåº¦å™¨ï¼‰
â”‚   â”œâ”€â”€ å¤šé˜Ÿåˆ—æ”¯æŒ
â”‚   â”œâ”€â”€ èµ„æºä¿è¯å’Œé™åˆ¶
â”‚   â””â”€â”€ å¼¹æ€§èµ„æºåˆ†é…
â””â”€â”€ Fair Schedulerï¼ˆå…¬å¹³è°ƒåº¦å™¨ï¼‰
    â”œâ”€â”€ å…¬å¹³å…±äº«èµ„æº
    â”œâ”€â”€ æŠ¢å æœºåˆ¶
    â””â”€â”€ åŠ¨æ€é˜Ÿåˆ—åˆ›å»º
```

##### ApplicationsManagerï¼ˆåº”ç”¨ç®¡ç†å™¨ï¼‰
- æ¥æ”¶åº”ç”¨æäº¤è¯·æ±‚
- å¯åŠ¨ApplicationMaster
- ç›‘æ§ApplicationMasterçŠ¶æ€
- é‡å¯å¤±è´¥çš„ApplicationMaster

### 2. NodeManager (NM)

NodeManagerè¿è¡Œåœ¨é›†ç¾¤çš„æ¯ä¸ªèŠ‚ç‚¹ä¸Šï¼Œè´Ÿè´£è¯¥èŠ‚ç‚¹çš„èµ„æºç®¡ç†ã€‚

#### NodeManagerå†…éƒ¨æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    NodeManager                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚NodeStatusUpdaterâ”‚              â”‚   NodeHealthChecker    â”‚â”‚
â”‚  â”‚                 â”‚              â”‚                         â”‚â”‚
â”‚  â”‚ â€¢ å¿ƒè·³å‘é€       â”‚              â”‚ â€¢ ç£ç›˜æ£€æŸ¥               â”‚â”‚
â”‚  â”‚ â€¢ çŠ¶æ€æŠ¥å‘Š       â”‚              â”‚ â€¢ å†…å­˜æ£€æŸ¥               â”‚â”‚
â”‚  â”‚ â€¢ æŒ‡ä»¤æ¥æ”¶       â”‚              â”‚ â€¢ ç½‘ç»œæ£€æŸ¥               â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚           â”‚                                   â”‚              â”‚
â”‚           â–¼                                   â–¼              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚              ContainerManager                          â”‚ â”‚
â”‚  â”‚                                                         â”‚ â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚ â”‚å®¹å™¨å¯åŠ¨     â”‚  â”‚å®¹å™¨ç›‘æ§     â”‚  â”‚å®¹å™¨æ¸…ç†         â”‚  â”‚ â”‚
â”‚  â”‚ â”‚             â”‚  â”‚             â”‚  â”‚                 â”‚  â”‚ â”‚
â”‚  â”‚ â”‚â€¢ èµ„æºåˆ†é…   â”‚  â”‚â€¢ èµ„æºä½¿ç”¨   â”‚  â”‚â€¢ è¿›ç¨‹ç»ˆæ­¢       â”‚  â”‚ â”‚
â”‚  â”‚ â”‚â€¢ è¿›ç¨‹å¯åŠ¨   â”‚  â”‚â€¢ çŠ¶æ€è·Ÿè¸ª   â”‚  â”‚â€¢ èµ„æºå›æ”¶       â”‚  â”‚ â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                              â”‚                              â”‚
â”‚                              â–¼                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚              ContainerExecutor                         â”‚ â”‚
â”‚  â”‚                                                         â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚  â”‚é»˜è®¤æ‰§è¡Œå™¨   â”‚  â”‚Linuxæ‰§è¡Œå™¨  â”‚  â”‚Dockeræ‰§è¡Œå™¨     â”‚  â”‚ â”‚
â”‚  â”‚  â”‚             â”‚  â”‚             â”‚  â”‚                 â”‚  â”‚ â”‚
â”‚  â”‚  â”‚â€¢ åŸºæœ¬éš”ç¦»   â”‚  â”‚â€¢ CGroups   â”‚  â”‚â€¢ å®¹å™¨åŒ–éš”ç¦»     â”‚  â”‚ â”‚
â”‚  â”‚  â”‚â€¢ è¿›ç¨‹ç®¡ç†   â”‚  â”‚â€¢ ç”¨æˆ·éš”ç¦»   â”‚  â”‚â€¢ é•œåƒç®¡ç†       â”‚  â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                              â”‚                              â”‚
â”‚                              â–¼                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                 Local Resources                        â”‚ â”‚
â”‚  â”‚                                                         â”‚ â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚ â”‚Containerâ”‚ â”‚Containerâ”‚ â”‚Containerâ”‚ â”‚    Log Files    â”‚ â”‚ â”‚
â”‚  â”‚ â”‚   #1    â”‚ â”‚   #2    â”‚ â”‚   #3    â”‚ â”‚                 â”‚ â”‚ â”‚
â”‚  â”‚ â”‚         â”‚ â”‚         â”‚ â”‚         â”‚ â”‚ â€¢ stdout/stderr â”‚ â”‚ â”‚
â”‚  â”‚ â”‚ 2GB RAM â”‚ â”‚ 1GB RAM â”‚ â”‚ 4GB RAM â”‚ â”‚ â€¢ åº”ç”¨æ—¥å¿—       â”‚ â”‚ â”‚
â”‚  â”‚ â”‚ 1 vCore â”‚ â”‚ 1 vCore â”‚ â”‚ 2 vCore â”‚ â”‚ â€¢ ç³»ç»Ÿæ—¥å¿—       â”‚ â”‚ â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### ä¸»è¦åŠŸèƒ½
- **å®¹å™¨ç®¡ç†**: å¯åŠ¨ã€ç›‘æ§å’Œåœæ­¢å®¹å™¨
- **èµ„æºç›‘æ§**: ç›‘æ§èŠ‚ç‚¹çš„CPUã€å†…å­˜ä½¿ç”¨æƒ…å†µ
- **æ—¥å¿—ç®¡ç†**: æ”¶é›†å’Œç®¡ç†åº”ç”¨æ—¥å¿—
- **å¥åº·æ£€æŸ¥**: å®šæœŸå‘ResourceManageræŠ¥å‘ŠèŠ‚ç‚¹çŠ¶æ€

#### æ ¸å¿ƒç»„ä»¶
```
NodeManagerç»„ä»¶ï¼š
â”œâ”€â”€ ContainerManager
â”‚   â”œâ”€â”€ å®¹å™¨ç”Ÿå‘½å‘¨æœŸç®¡ç†
â”‚   â””â”€â”€ èµ„æºéš”ç¦»å’Œé™åˆ¶
â”œâ”€â”€ NodeHealthChecker
â”‚   â”œâ”€â”€ èŠ‚ç‚¹å¥åº·çŠ¶æ€æ£€æŸ¥
â”‚   â””â”€â”€ ç£ç›˜ã€ç½‘ç»œçŠ¶æ€ç›‘æ§
â”œâ”€â”€ NodeStatusUpdater
â”‚   â”œâ”€â”€ å‘RMæŠ¥å‘ŠèŠ‚ç‚¹çŠ¶æ€
â”‚   â””â”€â”€ æ¥æ”¶RMçš„æŒ‡ä»¤
â””â”€â”€ ContainerExecutor
    â”œâ”€â”€ å®¹å™¨è¿›ç¨‹å¯åŠ¨
    â””â”€â”€ å®‰å…¨éš”ç¦»
```

### 3. ApplicationMaster (AM)

ApplicationMasteræ˜¯æ¯ä¸ªåº”ç”¨çš„"å¤§è„‘"ï¼Œè´Ÿè´£åè°ƒåº”ç”¨çš„æ‰§è¡Œã€‚

#### ApplicationMasteræ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  ApplicationMaster                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  RM Communicatorâ”‚              â”‚   Task Scheduler        â”‚â”‚
â”‚  â”‚                 â”‚              â”‚                         â”‚â”‚
â”‚  â”‚ â€¢ èµ„æºè¯·æ±‚       â”‚              â”‚ â€¢ ä»»åŠ¡åˆ†é…               â”‚â”‚
â”‚  â”‚ â€¢ å¿ƒè·³å‘é€       â”‚              â”‚ â€¢ è´Ÿè½½å‡è¡¡               â”‚â”‚
â”‚  â”‚ â€¢ çŠ¶æ€æŠ¥å‘Š       â”‚              â”‚ â€¢ ä¼˜å…ˆçº§ç®¡ç†             â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚           â”‚                                   â”‚              â”‚
â”‚           â–¼                                   â–¼              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚              Resource Manager                          â”‚ â”‚
â”‚  â”‚                                                         â”‚ â”‚
â”‚  â”‚ â€¢ èµ„æºéœ€æ±‚è®¡ç®—     â€¢ å®¹å™¨è¯·æ±‚ç”Ÿæˆ     â€¢ èµ„æºåˆ†é…è·Ÿè¸ª      â”‚ â”‚
â”‚  â”‚ â€¢ æ•°æ®æœ¬åœ°æ€§ä¼˜åŒ–   â€¢ èµ„æºåˆ©ç”¨ç‡ç›‘æ§   â€¢ åŠ¨æ€èµ„æºè°ƒæ•´      â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                              â”‚                              â”‚
â”‚                              â–¼                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚              Task Monitor                              â”‚ â”‚
â”‚  â”‚                                                         â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚  â”‚è¿›åº¦è·Ÿè¸ª     â”‚  â”‚æ•…éšœæ£€æµ‹     â”‚  â”‚æ€§èƒ½ç›‘æ§         â”‚  â”‚ â”‚
â”‚  â”‚  â”‚             â”‚  â”‚             â”‚  â”‚                 â”‚  â”‚ â”‚
â”‚  â”‚  â”‚â€¢ ä»»åŠ¡çŠ¶æ€   â”‚  â”‚â€¢ è¶…æ—¶æ£€æµ‹   â”‚  â”‚â€¢ èµ„æºä½¿ç”¨       â”‚  â”‚ â”‚
â”‚  â”‚  â”‚â€¢ å®Œæˆåº¦ç»Ÿè®¡ â”‚  â”‚â€¢ å¼‚å¸¸æ•è·   â”‚  â”‚â€¢ ååé‡ç»Ÿè®¡     â”‚  â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                              â”‚                              â”‚
â”‚                              â–¼                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚              Container Launcher                        â”‚ â”‚
â”‚  â”‚                                                         â”‚ â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚ â”‚Containerâ”‚ â”‚Containerâ”‚ â”‚Containerâ”‚ â”‚   Failed Tasks  â”‚ â”‚ â”‚
â”‚  â”‚ â”‚ Launch  â”‚ â”‚ Monitor â”‚ â”‚ Stop    â”‚ â”‚                 â”‚ â”‚ â”‚
â”‚  â”‚ â”‚         â”‚ â”‚         â”‚ â”‚         â”‚ â”‚ â€¢ é‡è¯•æœºåˆ¶       â”‚ â”‚ â”‚
â”‚  â”‚ â”‚â€¢ å¯åŠ¨å‘½ä»¤â”‚ â”‚â€¢ çŠ¶æ€ç›‘æ§â”‚ â”‚â€¢ æ¸…ç†èµ„æºâ”‚ â”‚ â€¢ æ•…éšœè½¬ç§»       â”‚ â”‚ â”‚
â”‚  â”‚ â”‚â€¢ ç¯å¢ƒé…ç½®â”‚ â”‚â€¢ æ—¥å¿—æ”¶é›†â”‚ â”‚â€¢ ç»“æœæ”¶é›†â”‚ â”‚ â€¢ é»‘åå•ç®¡ç†     â”‚ â”‚ â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### ä¸»è¦åŠŸèƒ½
- **èµ„æºè¯·æ±‚**: å‘ResourceManagerè¯·æ±‚èµ„æº
- **ä»»åŠ¡è°ƒåº¦**: å°†ä»»åŠ¡åˆ†é…ç»™è·å¾—çš„å®¹å™¨
- **è¿›åº¦ç›‘æ§**: ç›‘æ§ä»»åŠ¡æ‰§è¡Œè¿›åº¦
- **æ•…éšœå¤„ç†**: å¤„ç†ä»»åŠ¡å¤±è´¥å’Œé‡è¯•

#### ç”Ÿå‘½å‘¨æœŸ
```
ApplicationMasterç”Ÿå‘½å‘¨æœŸï¼š
1. åº”ç”¨æäº¤ â†’ ResourceManager
2. ResourceManagerå¯åŠ¨ApplicationMaster
3. ApplicationMasterå‘ResourceManageræ³¨å†Œ
4. ApplicationMasterè¯·æ±‚èµ„æº
5. ResourceManageråˆ†é…å®¹å™¨
6. ApplicationMasterå¯åŠ¨ä»»åŠ¡
7. ä»»åŠ¡æ‰§è¡Œå®Œæˆ
8. ApplicationMasteræ³¨é”€å¹¶é€€å‡º
```

### 4. Containerï¼ˆå®¹å™¨ï¼‰

Containeræ˜¯YARNä¸­èµ„æºåˆ†é…çš„åŸºæœ¬å•ä½ã€‚

#### Containeræ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Container                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  Resource Spec  â”‚              â”‚    Security Context     â”‚â”‚
â”‚  â”‚                 â”‚              â”‚                         â”‚â”‚
â”‚  â”‚ â€¢ Memory: 2GB   â”‚              â”‚ â€¢ User: yarn            â”‚â”‚
â”‚  â”‚ â€¢ vCores: 2     â”‚              â”‚ â€¢ Group: hadoop         â”‚â”‚
â”‚  â”‚ â€¢ Priority: 1   â”‚              â”‚ â€¢ Permissions: 755      â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚           â”‚                                   â”‚              â”‚
â”‚           â–¼                                   â–¼              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚              Launch Context                            â”‚ â”‚
â”‚  â”‚                                                         â”‚ â”‚
â”‚  â”‚ â€¢ å¯åŠ¨å‘½ä»¤: java -Xmx1024m MyApp                        â”‚ â”‚
â”‚  â”‚ â€¢ ç¯å¢ƒå˜é‡: JAVA_HOME, HADOOP_CONF_DIR                  â”‚ â”‚
â”‚  â”‚ â€¢ æœ¬åœ°èµ„æº: app.jar, config.xml                         â”‚ â”‚
â”‚  â”‚ â€¢ å·¥ä½œç›®å½•: /tmp/hadoop-yarn/container_xxx               â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                              â”‚                              â”‚
â”‚                              â–¼                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚              Process Management                        â”‚ â”‚
â”‚  â”‚                                                         â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚  â”‚è¿›ç¨‹å¯åŠ¨     â”‚  â”‚èµ„æºç›‘æ§     â”‚  â”‚è¿›ç¨‹æ§åˆ¶         â”‚  â”‚ â”‚
â”‚  â”‚  â”‚             â”‚  â”‚             â”‚  â”‚                 â”‚  â”‚ â”‚
â”‚  â”‚  â”‚â€¢ fork/exec  â”‚  â”‚â€¢ CPUä½¿ç”¨ç‡  â”‚  â”‚â€¢ ä¿¡å·å¤„ç†       â”‚  â”‚ â”‚
â”‚  â”‚  â”‚â€¢ ç¯å¢ƒè®¾ç½®   â”‚  â”‚â€¢ å†…å­˜ä½¿ç”¨é‡ â”‚  â”‚â€¢ è¿›ç¨‹ç»ˆæ­¢       â”‚  â”‚ â”‚
â”‚  â”‚  â”‚â€¢ æƒé™è®¾ç½®   â”‚  â”‚â€¢ ç£ç›˜I/O    â”‚  â”‚â€¢ èµ„æºæ¸…ç†       â”‚  â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                              â”‚                              â”‚
â”‚                              â–¼                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚              Resource Isolation                        â”‚ â”‚
â”‚  â”‚                                                         â”‚ â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚ â”‚ CGroups â”‚ â”‚ Chroot  â”‚ â”‚Network  â”‚ â”‚   File System   â”‚ â”‚ â”‚
â”‚  â”‚ â”‚         â”‚ â”‚         â”‚ â”‚         â”‚ â”‚                 â”‚ â”‚ â”‚
â”‚  â”‚ â”‚â€¢ CPUé™åˆ¶â”‚ â”‚â€¢ æ–‡ä»¶ç³»ç»Ÿâ”‚ â”‚â€¢ ç½‘ç»œéš”ç¦»â”‚ â”‚ â€¢ æœ¬åœ°ç›®å½•       â”‚ â”‚ â”‚
â”‚  â”‚ â”‚â€¢ å†…å­˜é™åˆ¶â”‚ â”‚â€¢ æ ¹ç›®å½•  â”‚ â”‚â€¢ ç«¯å£ç®¡ç†â”‚ â”‚ â€¢ æ—¥å¿—æ–‡ä»¶       â”‚ â”‚ â”‚
â”‚  â”‚ â”‚â€¢ I/Oé™åˆ¶â”‚ â”‚â€¢ æƒé™éš”ç¦»â”‚ â”‚â€¢ å¸¦å®½æ§åˆ¶â”‚ â”‚ â€¢ ä¸´æ—¶æ–‡ä»¶       â”‚ â”‚ â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### å®¹å™¨ç‰¹æ€§
- **èµ„æºå°è£…**: å°è£…CPUã€å†…å­˜ç­‰èµ„æº
- **è¿›ç¨‹éš”ç¦»**: æä¾›è¿›ç¨‹çº§åˆ«çš„éš”ç¦»
- **ç”Ÿå‘½å‘¨æœŸç®¡ç†**: ç”±NodeManagerç®¡ç†
- **åŠ¨æ€åˆ†é…**: æ ¹æ®éœ€æ±‚åŠ¨æ€åˆ›å»ºå’Œé”€æ¯

#### å®¹å™¨è§„æ ¼
```java
// å®¹å™¨èµ„æºè§„æ ¼ç¤ºä¾‹
Resource containerResource = Resource.newInstance(
    1024,  // å†…å­˜ (MB)
    1      // CPUæ ¸å¿ƒæ•°
);

// å®¹å™¨ä¼˜å…ˆçº§
Priority priority = Priority.newInstance(1);

// å®¹å™¨è¯·æ±‚
ContainerRequest containerRequest = new ContainerRequest(
    containerResource,
    null,  // èŠ‚ç‚¹åå¥½
    null,  // æœºæ¶åå¥½
    priority
);
```

## YARNå·¥ä½œæµç¨‹

### YARNå·¥ä½œæµç¨‹æ¦‚è¿°

YARNï¼ˆYet Another Resource Negotiatorï¼‰çš„å·¥ä½œæµç¨‹å¯ä»¥åˆ†ä¸ºå››ä¸ªä¸»è¦é˜¶æ®µï¼š

1. **åº”ç”¨æäº¤é˜¶æ®µ**: å®¢æˆ·ç«¯æäº¤åº”ç”¨åˆ°ResourceManager
2. **èµ„æºåå•†é˜¶æ®µ**: ApplicationMasterä¸ResourceManageråå•†èµ„æº
3. **ä»»åŠ¡æ‰§è¡Œé˜¶æ®µ**: åœ¨åˆ†é…çš„å®¹å™¨ä¸­æ‰§è¡Œå…·ä½“ä»»åŠ¡
4. **åº”ç”¨å®Œæˆé˜¶æ®µ**: æ¸…ç†èµ„æºå¹¶è¿”å›ç»“æœ

### YARNå®Œæ•´å·¥ä½œæµç¨‹å›¾

#### æ—¶åºå›¾è¡¨ç¤º

```mermaid
sequenceDiagram
    participant Client
    participant RM as ResourceManager
    participant NM1 as NodeManager1
    participant NM2 as NodeManager2
    participant AM as ApplicationMaster
    
    Note over Client,AM: åº”ç”¨æäº¤é˜¶æ®µ
    Client->>RM: 1. æäº¤åº”ç”¨(ApplicationSubmissionContext)<br/>ğŸ“ WordCountDriver.main() â†’ Job.getInstance()
    RM->>RM: 2. éªŒè¯æƒé™å’Œèµ„æº<br/>ğŸ“ HadoopConfigManager.configureHadoop()
    RM->>Client: 3. è¿”å›ApplicationId<br/>ğŸ“ job.getJobID()
    RM->>NM1: 4. å¯åŠ¨ApplicationMaster<br/>ğŸ“ mapreduce.framework.name=yarn
    NM1->>AM: 5. åˆ›å»ºAMå®¹å™¨<br/>ğŸ“ job.setJarByClass(WordCountDriver.class)
    AM->>RM: 6. æ³¨å†ŒApplicationMaster<br/>ğŸ“ job.submit() å†…éƒ¨è§¦å‘
    
    Note over Client,AM: èµ„æºåå•†é˜¶æ®µ
    AM->>RM: 7. è¯·æ±‚å®¹å™¨èµ„æº<br/>ğŸ“ job.setMapperClass() + setReducerClass()
    RM->>RM: 8. è°ƒåº¦å™¨åˆ†é…èµ„æº<br/>ğŸ“ job.setPriority() + setNumReduceTasks()
    RM->>AM: 9. è¿”å›åˆ†é…çš„å®¹å™¨<br/>ğŸ“ progressmonitor.pollinterval é…ç½®
    
    Note over Client,AM: ä»»åŠ¡æ‰§è¡Œé˜¶æ®µ
    AM->>NM1: 10. å¯åŠ¨å®¹å™¨1<br/>ğŸ“ FileInputFormat.addInputPath()
    AM->>NM2: 11. å¯åŠ¨å®¹å™¨2<br/>ğŸ“ FileOutputFormat.setOutputPath()
    NM1->>AM: 12. å®¹å™¨1çŠ¶æ€æŠ¥å‘Š<br/>ğŸ“ WordCountMapper æ‰§è¡Œ
    NM2->>AM: 13. å®¹å™¨2çŠ¶æ€æŠ¥å‘Š<br/>ğŸ“ WordCountReducer æ‰§è¡Œ
    AM->>RM: 14. åº”ç”¨è¿›åº¦æŠ¥å‘Š<br/>ğŸ“ job.getTrackingURL()
    RM->>Client: 15. çŠ¶æ€æ›´æ–°<br/>ğŸ“ ç›‘æ§URLè¾“å‡º
    
    Note over Client,AM: åº”ç”¨å®Œæˆé˜¶æ®µ
    AM->>RM: 16. æŠ¥å‘Šåº”ç”¨å®Œæˆ<br/>ğŸ“ printJobStatistics() å¯é€‰
    RM->>NM1: 17. æ¸…ç†AMå®¹å™¨<br/>ğŸ“ fs.delete(outputDir) æ¸…ç†
    RM->>Client: 18. è¿”å›åº”ç”¨ç»“æœ<br/>ğŸ“ System.exit(success ? 0 : 1)
```

#### æµç¨‹æ­¥éª¤è¯¦è§£ï¼ˆç»“åˆä»£ç å®ç°ï¼‰

**é˜¶æ®µ1: åº”ç”¨æäº¤**
1. **Clientæäº¤åº”ç”¨**: å®¢æˆ·ç«¯åˆ›å»ºApplicationSubmissionContextï¼ŒåŒ…å«åº”ç”¨ä¿¡æ¯ã€èµ„æºéœ€æ±‚ç­‰
   ```java
   // WordCountDriver.java - mainæ–¹æ³•
   Configuration conf = new Configuration();
   String[] otherArgs = new GenericOptionsParser(conf, args).getRemainingArgs();
   boolean success = runWordCountJob(conf, inputPath, outputPath);
   ```

2. **æƒé™éªŒè¯**: ResourceManageréªŒè¯ç”¨æˆ·æƒé™å’Œèµ„æºé…é¢
   ```java
   // HadoopConfigManager.java - configureHadoopæ–¹æ³•
   String hadoopUser = getProperty("hadoop.user.name", "hadoop");
   System.setProperty("HADOOP_USER_NAME", hadoopUser);
   ```

3. **åˆ†é…ID**: ä¸ºåº”ç”¨åˆ†é…å”¯ä¸€çš„ApplicationId
   ```java
   // WordCountDriver.java - runWordCountJobæ–¹æ³•
   Job job = Job.getInstance(conf, "word count");
   job.setJarByClass(WordCountDriver.class);
   ```

4. **é€‰æ‹©èŠ‚ç‚¹**: ResourceManageré€‰æ‹©åˆé€‚çš„NodeManagerå¯åŠ¨ApplicationMaster
   ```java
   // HadoopConfigManager.java - YARNé…ç½®
   String rmHostname = getProperty("yarn.resourcemanager.hostname");
   conf.set("yarn.resourcemanager.hostname", rmHostname);
   ```

5. **å¯åŠ¨AM**: NodeManagerå¯åŠ¨ApplicationMasterå®¹å™¨
   ```java
   // WordCountDriver.java - MapReduceæ¡†æ¶é…ç½®
   String mrFramework = getProperty("mapreduce.framework.name", "yarn");
   conf.set("mapreduce.framework.name", mrFramework);
   ```

6. **AMæ³¨å†Œ**: ApplicationMasterå‘ResourceManageræ³¨å†Œå¹¶è·å–é›†ç¾¤ä¿¡æ¯
   ```java
   // WordCountDriver.java - ä½œä¸šæäº¤
   job.submit(); // å†…éƒ¨ä¼šè§¦å‘AMæ³¨å†Œè¿‡ç¨‹
   logger.info("Job ID: " + job.getJobID());
   ```

**é˜¶æ®µ2: èµ„æºåå•†**
7. **èµ„æºè¯·æ±‚**: ApplicationMasteræ ¹æ®ä»»åŠ¡éœ€æ±‚å‘ResourceManagerè¯·æ±‚å®¹å™¨èµ„æº
   ```java
   // WordCountDriver.java - è®¾ç½®Mapperå’ŒReducer
   job.setMapperClass(WordCountMapper.class);
   job.setReducerClass(WordCountReducer.class);
   job.setNumReduceTasks(2); // è®¾ç½®Reduceä»»åŠ¡æ•°é‡
   ```

8. **èµ„æºè°ƒåº¦**: ResourceManagerçš„è°ƒåº¦å™¨æ ¹æ®ç­–ç•¥åˆ†é…èµ„æº
   ```java
   // WordCountDriver.java - ä½œä¸šä¼˜å…ˆçº§å’Œé˜Ÿåˆ—é…ç½®
   job.setPriority(org.apache.hadoop.mapreduce.JobPriority.NORMAL);
   // job.setQueueName("default"); // å¯é€‰ï¼šè®¾ç½®é˜Ÿåˆ—
   ```

9. **åˆ†é…å“åº”**: ResourceManagerè¿”å›åˆ†é…çš„å®¹å™¨ä¿¡æ¯ç»™ApplicationMaster
   ```java
   // HadoopConfigManager.java - ç›‘æ§é…ç½®
   long pollInterval = getLongProperty("mapreduce.client.progressmonitor.pollinterval", 10000);
   conf.setLong("mapreduce.client.progressmonitor.pollinterval", pollInterval);
   ```

**é˜¶æ®µ3: ä»»åŠ¡æ‰§è¡Œ**
10-11. **å¯åŠ¨å®¹å™¨**: ApplicationMasteråœ¨åˆ†é…çš„NodeManagerä¸Šå¯åŠ¨ä»»åŠ¡å®¹å™¨
   ```java
   // WordCountDriver.java - è¾“å…¥è¾“å‡ºé…ç½®
   FileInputFormat.addInputPath(job, new Path(inputPath));
   FileOutputFormat.setOutputPath(job, outputDir);
   job.setInputFormatClass(TextInputFormat.class);
   job.setOutputFormatClass(TextOutputFormat.class);
   ```

12-13. **æ‰§è¡Œä»»åŠ¡**: å„ä¸ªå®¹å™¨ä¸­çš„ä»»åŠ¡å¼€å§‹æ‰§è¡Œä¸šåŠ¡é€»è¾‘
   ```java
   // WordCountMapper.java å’Œ WordCountReducer.java
   // å®é™…çš„Mapå’ŒReduceé€»è¾‘åœ¨è¿™äº›ç±»ä¸­å®ç°
   job.setOutputKeyClass(Text.class);
   job.setOutputValueClass(IntWritable.class);
   ```

14-15. **çŠ¶æ€æŠ¥å‘Š**: NodeManagerå®šæœŸå‘ApplicationMasteræŠ¥å‘Šä»»åŠ¡æ‰§è¡ŒçŠ¶æ€
   ```java
   // WordCountDriver.java - ä½œä¸šè·Ÿè¸ª
   logger.info("Job tracking URL: " + job.getTrackingURL());
   logger.info("Monitor at: http://10.132.144.24:8088/cluster/app/" + 
              job.getJobID().toString().replace("job_", "application_"));
   ```

**é˜¶æ®µ4: åº”ç”¨å®Œæˆ**
16. **å®ŒæˆæŠ¥å‘Š**: ApplicationMasterå‘ResourceManageræŠ¥å‘Šåº”ç”¨æ‰§è¡Œå®Œæˆ
   ```java
   // WordCountDriver.java - ä½œä¸šç»Ÿè®¡ï¼ˆå¯é€‰ï¼‰
   private static void printJobStatistics(Job job) throws Exception {
       org.apache.hadoop.mapreduce.Counters counters = job.getCounters();
       // è·å–ä½œä¸šæ‰§è¡Œç»Ÿè®¡ä¿¡æ¯
   }
   ```

17. **èµ„æºæ¸…ç†**: ResourceManageræŒ‡ç¤ºNodeManageræ¸…ç†ApplicationMasterå®¹å™¨
   ```java
   // WordCountDriver.java - è¾“å‡ºç›®å½•æ¸…ç†
   org.apache.hadoop.fs.FileSystem fs = org.apache.hadoop.fs.FileSystem.get(conf);
   if (fs.exists(outputDir)) {
       fs.delete(outputDir, true); // æ¸…ç†å·²å­˜åœ¨çš„è¾“å‡ºç›®å½•
   }
   ```

18. **ç»“æœè¿”å›**: ResourceManagerå°†æœ€ç»ˆç»“æœè¿”å›ç»™Client
   ```java
   // WordCountDriver.java - mainæ–¹æ³•ç»“æŸ
   System.exit(success ? 0 : 1); // è¿”å›æ‰§è¡Œç»“æœ
   ```

### 1. åº”ç”¨æäº¤æµç¨‹å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        åº”ç”¨æäº¤æµç¨‹                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     Client      â”‚â”€â”€â”€â–¶â”‚              Step 1                     â”‚
â”‚                 â”‚    â”‚        æäº¤åº”ç”¨åˆ°RM                      â”‚
â”‚ â€¢ åº”ç”¨ä»£ç        â”‚    â”‚                                         â”‚
â”‚ â€¢ é…ç½®æ–‡ä»¶       â”‚    â”‚ â€¢ ApplicationSubmissionContext          â”‚
â”‚ â€¢ èµ„æºéœ€æ±‚       â”‚    â”‚ â€¢ åº”ç”¨ç±»å‹ (MapReduce/Spark)            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚ â€¢ é˜Ÿåˆ—åç§°                               â”‚
                       â”‚ â€¢ èµ„æºéœ€æ±‚ (å†…å­˜/CPU)                    â”‚
                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           Step 2                               â”‚
â”‚                    ResourceManageréªŒè¯                         â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ç”¨æˆ·æƒé™éªŒè¯ â”‚  â”‚èµ„æºé…é¢æ£€æŸ¥ â”‚  â”‚åº”ç”¨ç±»å‹éªŒè¯             â”‚  â”‚
â”‚  â”‚             â”‚  â”‚             â”‚  â”‚                         â”‚  â”‚
â”‚  â”‚â€¢ ACLæ£€æŸ¥    â”‚  â”‚â€¢ é˜Ÿåˆ—é™åˆ¶   â”‚  â”‚â€¢ æ”¯æŒçš„æ¡†æ¶             â”‚  â”‚
â”‚  â”‚â€¢ ç”¨æˆ·ç»„éªŒè¯ â”‚  â”‚â€¢ ç”¨æˆ·é…é¢   â”‚  â”‚â€¢ ç‰ˆæœ¬å…¼å®¹æ€§             â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           Step 3                               â”‚
â”‚                     åˆ†é…ApplicationId                          â”‚
â”‚                                                                 â”‚
â”‚ â€¢ ç”Ÿæˆå”¯ä¸€ID: application_1234567890123_0001                   â”‚
â”‚ â€¢ åˆ›å»ºåº”ç”¨çŠ¶æ€è·Ÿè¸ª                                               â”‚
â”‚ â€¢ åˆå§‹åŒ–åº”ç”¨ä¸Šä¸‹æ–‡                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           Step 4                               â”‚
â”‚                   å¯åŠ¨ApplicationMaster                        â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚é€‰æ‹©èŠ‚ç‚¹     â”‚  â”‚åˆ†é…å®¹å™¨     â”‚  â”‚å¯åŠ¨AMè¿›ç¨‹               â”‚  â”‚
â”‚  â”‚             â”‚  â”‚             â”‚  â”‚                         â”‚  â”‚
â”‚  â”‚â€¢ èµ„æºå¯ç”¨æ€§ â”‚  â”‚â€¢ å†…å­˜åˆ†é…   â”‚  â”‚â€¢ ä¸‹è½½åº”ç”¨æ–‡ä»¶           â”‚  â”‚
â”‚  â”‚â€¢ æ•°æ®æœ¬åœ°æ€§ â”‚  â”‚â€¢ CPUåˆ†é…    â”‚  â”‚â€¢ è®¾ç½®ç¯å¢ƒå˜é‡           â”‚  â”‚
â”‚  â”‚â€¢ è´Ÿè½½å‡è¡¡   â”‚  â”‚â€¢ ä¼˜å…ˆçº§è®¾ç½® â”‚  â”‚â€¢ å¯åŠ¨AMä¸»ç±»            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           Step 5                               â”‚
â”‚                 ApplicationMasteræ³¨å†Œ                          â”‚
â”‚                                                                 â”‚
â”‚ â€¢ å‘RMæ³¨å†Œè‡ªèº«ä¿¡æ¯                                               â”‚
â”‚ â€¢ è·å–é›†ç¾¤èµ„æºä¿¡æ¯                                               â”‚
â”‚ â€¢ å¼€å§‹èµ„æºåå•†è¿‡ç¨‹                                               â”‚
â”‚ â€¢ è®¾ç½®å¿ƒè·³æœºåˆ¶                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. èµ„æºåˆ†é…æµç¨‹å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        èµ„æºåˆ†é…æµç¨‹                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           Step 1                               â”‚
â”‚                 ApplicationMasterè¯·æ±‚èµ„æº                      â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚èµ„æºéœ€æ±‚è§„æ ¼ â”‚  â”‚æœ¬åœ°æ€§åå¥½   â”‚  â”‚ä¼˜å…ˆçº§è®¾ç½®               â”‚  â”‚
â”‚  â”‚             â”‚  â”‚             â”‚  â”‚                         â”‚  â”‚
â”‚  â”‚â€¢ å†…å­˜å¤§å°   â”‚  â”‚â€¢ èŠ‚ç‚¹åå¥½   â”‚  â”‚â€¢ ä»»åŠ¡ä¼˜å…ˆçº§             â”‚  â”‚
â”‚  â”‚â€¢ CPUæ ¸å¿ƒæ•°  â”‚  â”‚â€¢ æœºæ¶åå¥½   â”‚  â”‚â€¢ èµ„æºä¼˜å…ˆçº§             â”‚  â”‚
â”‚  â”‚â€¢ å®¹å™¨æ•°é‡   â”‚  â”‚â€¢ æ•°æ®æœ¬åœ°æ€§ â”‚  â”‚â€¢ æŠ¢å ç­–ç•¥               â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           Step 2                               â”‚
â”‚                    è°ƒåº¦å™¨è¯„ä¼°å’Œåˆ†é…                             â”‚
â”‚                                                                 â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚ â”‚   é˜Ÿåˆ—æ£€æŸ¥      â”‚    â”‚   èµ„æºè¯„ä¼°      â”‚    â”‚   èŠ‚ç‚¹é€‰æ‹©      â”‚â”‚
â”‚ â”‚                 â”‚    â”‚                 â”‚    â”‚                 â”‚â”‚
â”‚ â”‚ â€¢ é˜Ÿåˆ—å®¹é‡      â”‚    â”‚ â€¢ å¯ç”¨å†…å­˜      â”‚    â”‚ â€¢ å¥åº·çŠ¶æ€      â”‚â”‚
â”‚ â”‚ â€¢ ç”¨æˆ·é™åˆ¶      â”‚    â”‚ â€¢ å¯ç”¨CPU       â”‚    â”‚ â€¢ è´Ÿè½½å‡è¡¡      â”‚â”‚
â”‚ â”‚ â€¢ åº”ç”¨é™åˆ¶      â”‚    â”‚ â€¢ ç½‘ç»œå¸¦å®½      â”‚    â”‚ â€¢ æœ¬åœ°æ€§åŒ¹é…    â”‚â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           Step 3                               â”‚
â”‚                      å®¹å™¨åˆ†é…å†³ç­–                               â”‚
â”‚                                                                 â”‚
â”‚        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚        â”‚              è°ƒåº¦ç®—æ³•                        â”‚         â”‚
â”‚        â”‚                                             â”‚         â”‚
â”‚        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚         â”‚
â”‚        â”‚  â”‚å®¹é‡è°ƒåº¦å™¨   â”‚  â”‚å…¬å¹³è°ƒåº¦å™¨               â”‚ â”‚         â”‚
â”‚        â”‚  â”‚             â”‚  â”‚                         â”‚ â”‚         â”‚
â”‚        â”‚  â”‚â€¢ é˜Ÿåˆ—å±‚æ¬¡   â”‚  â”‚â€¢ èµ„æºæ± ç®¡ç†             â”‚ â”‚         â”‚
â”‚        â”‚  â”‚â€¢ å®¹é‡ä¿è¯   â”‚  â”‚â€¢ å…¬å¹³å…±äº«               â”‚ â”‚         â”‚
â”‚        â”‚  â”‚â€¢ å¼¹æ€§é˜Ÿåˆ—   â”‚  â”‚â€¢ æŠ¢å æœºåˆ¶               â”‚ â”‚         â”‚
â”‚        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚         â”‚
â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           Step 4                               â”‚
â”‚                    å®¹å™¨å¯åŠ¨å’Œç›‘æ§                               â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚å®¹å™¨å¯åŠ¨     â”‚  â”‚èµ„æºç›‘æ§     â”‚  â”‚çŠ¶æ€æŠ¥å‘Š                 â”‚  â”‚
â”‚  â”‚             â”‚  â”‚             â”‚  â”‚                         â”‚  â”‚
â”‚  â”‚â€¢ ä¸‹è½½èµ„æº   â”‚  â”‚â€¢ å†…å­˜ä½¿ç”¨   â”‚  â”‚â€¢ å¿ƒè·³æœºåˆ¶               â”‚  â”‚
â”‚  â”‚â€¢ è®¾ç½®ç¯å¢ƒ   â”‚  â”‚â€¢ CPUä½¿ç”¨    â”‚  â”‚â€¢ è¿›åº¦æŠ¥å‘Š               â”‚  â”‚
â”‚  â”‚â€¢ å¯åŠ¨è¿›ç¨‹   â”‚  â”‚â€¢ ç½‘ç»œIO     â”‚  â”‚â€¢ å¼‚å¸¸å¤„ç†               â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3. ä»»åŠ¡æ‰§è¡Œæµç¨‹å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ä»»åŠ¡æ‰§è¡Œæµç¨‹                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           Step 1                               â”‚
â”‚                        å®¹å™¨å¯åŠ¨é˜¶æ®µ                             â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚TokenéªŒè¯    â”‚  â”‚èµ„æºåˆ†é…     â”‚  â”‚è¿›ç¨‹å¯åŠ¨                 â”‚  â”‚
â”‚  â”‚             â”‚  â”‚             â”‚  â”‚                         â”‚  â”‚
â”‚  â”‚â€¢ å®‰å…¨éªŒè¯   â”‚  â”‚â€¢ å†…å­˜åˆ†é…   â”‚  â”‚â€¢ ä¸‹è½½åº”ç”¨æ–‡ä»¶           â”‚  â”‚
â”‚  â”‚â€¢ æƒé™æ£€æŸ¥   â”‚  â”‚â€¢ CPUåˆ†é…    â”‚  â”‚â€¢ è®¾ç½®ç¯å¢ƒå˜é‡           â”‚  â”‚
â”‚  â”‚â€¢ æ—¶æ•ˆæ€§éªŒè¯ â”‚  â”‚â€¢ ç£ç›˜ç©ºé—´   â”‚  â”‚â€¢ å¯åŠ¨JVMè¿›ç¨‹            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           Step 2                               â”‚
â”‚                        ä»»åŠ¡æ‰§è¡Œé˜¶æ®µ                             â”‚
â”‚                                                                 â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚ â”‚   åº”ç”¨è¿è¡Œ      â”‚    â”‚   è¿›åº¦ç›‘æ§      â”‚    â”‚   èµ„æºç›‘æ§      â”‚â”‚
â”‚ â”‚                 â”‚    â”‚                 â”‚    â”‚                 â”‚â”‚
â”‚ â”‚ â€¢ ä¸šåŠ¡é€»è¾‘æ‰§è¡Œ  â”‚    â”‚ â€¢ ä»»åŠ¡è¿›åº¦      â”‚    â”‚ â€¢ å†…å­˜ä½¿ç”¨      â”‚â”‚
â”‚ â”‚ â€¢ æ•°æ®å¤„ç†      â”‚    â”‚ â€¢ çŠ¶æ€æŠ¥å‘Š      â”‚    â”‚ â€¢ CPUä½¿ç”¨       â”‚â”‚
â”‚ â”‚ â€¢ ç»“æœè¾“å‡º      â”‚    â”‚ â€¢ å¿ƒè·³æœºåˆ¶      â”‚    â”‚ â€¢ ç½‘ç»œIO        â”‚â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           Step 3                               â”‚
â”‚                        çŠ¶æ€åŒæ­¥é˜¶æ®µ                             â”‚
â”‚                                                                 â”‚
â”‚        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚        â”‚              çŠ¶æ€é€šä¿¡                        â”‚         â”‚
â”‚        â”‚                                             â”‚         â”‚
â”‚        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚         â”‚
â”‚        â”‚  â”‚AM â† NM      â”‚  â”‚RM â† AM                  â”‚ â”‚         â”‚
â”‚        â”‚  â”‚             â”‚  â”‚                         â”‚ â”‚         â”‚
â”‚        â”‚  â”‚â€¢ ä»»åŠ¡çŠ¶æ€   â”‚  â”‚â€¢ åº”ç”¨è¿›åº¦               â”‚ â”‚         â”‚
â”‚        â”‚  â”‚â€¢ èµ„æºä½¿ç”¨   â”‚  â”‚â€¢ èµ„æºéœ€æ±‚               â”‚ â”‚         â”‚
â”‚        â”‚  â”‚â€¢ å¼‚å¸¸æŠ¥å‘Š   â”‚  â”‚â€¢ å®ŒæˆçŠ¶æ€               â”‚ â”‚         â”‚
â”‚        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚         â”‚
â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           Step 4                               â”‚
â”‚                        ä»»åŠ¡å®Œæˆé˜¶æ®µ                             â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚è¿›ç¨‹é€€å‡º     â”‚  â”‚èµ„æºæ¸…ç†     â”‚  â”‚çŠ¶æ€æ›´æ–°                 â”‚  â”‚
â”‚  â”‚             â”‚  â”‚             â”‚  â”‚                         â”‚  â”‚
â”‚  â”‚â€¢ æ­£å¸¸é€€å‡º   â”‚  â”‚â€¢ å†…å­˜é‡Šæ”¾   â”‚  â”‚â€¢ å®Œæˆé€šçŸ¥               â”‚  â”‚
â”‚  â”‚â€¢ å¼‚å¸¸é€€å‡º   â”‚  â”‚â€¢ ä¸´æ—¶æ–‡ä»¶   â”‚  â”‚â€¢ ç»“æœæ”¶é›†               â”‚  â”‚
â”‚  â”‚â€¢ è¶…æ—¶é€€å‡º   â”‚  â”‚â€¢ ç½‘ç»œè¿æ¥   â”‚  â”‚â€¢ æ—¥å¿—èšåˆ               â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           Step 5                               â”‚
â”‚                        åº”ç”¨å®Œæˆé˜¶æ®µ                             â”‚
â”‚                                                                 â”‚
â”‚ â€¢ æ‰€æœ‰ä»»åŠ¡å®Œæˆç¡®è®¤                                               â”‚
â”‚ â€¢ ApplicationMasteræ³¨é”€                                          â”‚
â”‚ â€¢ ResourceManageræ¸…ç†åº”ç”¨ä¿¡æ¯                                    â”‚
â”‚ â€¢ æœ€ç»ˆçŠ¶æ€æŠ¥å‘Šç»™Client                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## YARNè°ƒåº¦å™¨è¯¦è§£

### 1. Capacity Schedulerï¼ˆå®¹é‡è°ƒåº¦å™¨ï¼‰

#### ç‰¹ç‚¹
- **å¤šé˜Ÿåˆ—æ”¯æŒ**: æ”¯æŒå¤šä¸ªé˜Ÿåˆ—ï¼Œæ¯ä¸ªé˜Ÿåˆ—æœ‰ç‹¬ç«‹çš„èµ„æºé…ç½®
- **èµ„æºä¿è¯**: æ¯ä¸ªé˜Ÿåˆ—æœ‰æœ€å°èµ„æºä¿è¯
- **å¼¹æ€§å…±äº«**: ç©ºé—²èµ„æºå¯ä»¥è¢«å…¶ä»–é˜Ÿåˆ—ä½¿ç”¨
- **å±‚æ¬¡åŒ–é˜Ÿåˆ—**: æ”¯æŒé˜Ÿåˆ—çš„å±‚æ¬¡åŒ–ç»„ç»‡

#### é…ç½®ç¤ºä¾‹
```xml
<!-- capacity-scheduler.xml -->
<configuration>
  <!-- é˜Ÿåˆ—å®šä¹‰ -->
  <property>
    <name>yarn.scheduler.capacity.root.queues</name>
    <value>default,production,development</value>
  </property>
  
  <!-- é˜Ÿåˆ—å®¹é‡é…ç½® -->
  <property>
    <name>yarn.scheduler.capacity.root.default.capacity</name>
    <value>40</value>
  </property>
  
  <property>
    <name>yarn.scheduler.capacity.root.production.capacity</name>
    <value>40</value>
  </property>
  
  <property>
    <name>yarn.scheduler.capacity.root.development.capacity</name>
    <value>20</value>
  </property>
  
  <!-- æœ€å¤§å®¹é‡é…ç½® -->
  <property>
    <name>yarn.scheduler.capacity.root.default.maximum-capacity</name>
    <value>60</value>
  </property>
</configuration>
```

### 2. Fair Schedulerï¼ˆå…¬å¹³è°ƒåº¦å™¨ï¼‰

#### ç‰¹ç‚¹
- **å…¬å¹³å…±äº«**: æ‰€æœ‰åº”ç”¨å…¬å¹³å…±äº«é›†ç¾¤èµ„æº
- **æŠ¢å æœºåˆ¶**: å¯ä»¥æŠ¢å å…¶ä»–åº”ç”¨çš„èµ„æº
- **åŠ¨æ€é˜Ÿåˆ—**: æ”¯æŒåŠ¨æ€åˆ›å»ºé˜Ÿåˆ—
- **å¤šç§å…¬å¹³ç­–ç•¥**: æ”¯æŒä¸åŒçš„å…¬å¹³æ€§å®šä¹‰

#### é…ç½®ç¤ºä¾‹
```xml
<!-- fair-scheduler.xml -->
<allocations>
  <queue name="production">
    <minResources>10000 mb,0 vcores</minResources>
    <maxResources>90000 mb,0 vcores</maxResources>
    <maxRunningApps>50</maxRunningApps>
    <weight>40.0</weight>
    <schedulingPolicy>fair</schedulingPolicy>
  </queue>
  
  <queue name="development">
    <minResources>5000 mb,0 vcores</minResources>
    <maxResources>30000 mb,0 vcores</maxResources>
    <maxRunningApps>20</maxRunningApps>
    <weight>60.0</weight>
    <schedulingPolicy>fair</schedulingPolicy>
  </queue>
  
  <queuePlacementPolicy>
    <rule name="specified" />
    <rule name="user" />
    <rule name="default" queue="development" />
  </queuePlacementPolicy>
</allocations>
```

## YARNèµ„æºç®¡ç†

### 1. èµ„æºç±»å‹

#### åŸºæœ¬èµ„æºç±»å‹
```java
// CPUå’Œå†…å­˜èµ„æº
Resource resource = Resource.newInstance(
    4096,  // å†…å­˜ (MB)
    2      // CPUæ ¸å¿ƒæ•° (vCores)
);

// æ‰©å±•èµ„æºç±»å‹ï¼ˆHadoop 3.xï¼‰
ResourceInformation gpuResource = ResourceInformation.newInstance(
    "yarn.io/gpu",
    "",
    1L,
    ResourceTypes.COUNTABLE,
    0L,
    Long.MAX_VALUE
);
```

#### èµ„æºé…ç½®
```xml
<!-- yarn-site.xml -->
<configuration>
  <!-- NodeManagerèµ„æºé…ç½® -->
  <property>
    <name>yarn.nodemanager.resource.memory-mb</name>
    <value>8192</value>
  </property>
  
  <property>
    <name>yarn.nodemanager.resource.cpu-vcores</name>
    <value>4</value>
  </property>
  
  <!-- å®¹å™¨æœ€å°èµ„æº -->
  <property>
    <name>yarn.scheduler.minimum-allocation-mb</name>
    <value>512</value>
  </property>
  
  <property>
    <name>yarn.scheduler.minimum-allocation-vcores</name>
    <value>1</value>
  </property>
  
  <!-- å®¹å™¨æœ€å¤§èµ„æº -->
  <property>
    <name>yarn.scheduler.maximum-allocation-mb</name>
    <value>4096</value>
  </property>
  
  <property>
    <name>yarn.scheduler.maximum-allocation-vcores</name>
    <value>2</value>
  </property>
</configuration>
```

### 2. èµ„æºéš”ç¦»

#### CGroupsèµ„æºéš”ç¦»
```xml
<!-- å¯ç”¨CGroups -->
<property>
  <name>yarn.nodemanager.container-executor.class</name>
  <value>org.apache.hadoop.yarn.server.nodemanager.LinuxContainerExecutor</value>
</property>

<property>
  <name>yarn.nodemanager.linux-container-executor.cgroups.hierarchy</name>
  <value>/hadoop-yarn</value>
</property>

<property>
  <name>yarn.nodemanager.linux-container-executor.cgroups.mount</name>
  <value>true</value>
</property>

<property>
  <name>yarn.nodemanager.linux-container-executor.cgroups.mount-path</name>
  <value>/sys/fs/cgroup</value>
</property>
```

## YARNé«˜å¯ç”¨é…ç½®

### ResourceManager HA

```xml
<!-- yarn-site.xml -->
<configuration>
  <!-- å¯ç”¨RM HA -->
  <property>
    <name>yarn.resourcemanager.ha.enabled</name>
    <value>true</value>
  </property>
  
  <!-- RMé›†ç¾¤ID -->
  <property>
    <name>yarn.resourcemanager.cluster-id</name>
    <value>yarn-cluster</value>
  </property>
  
  <!-- RM IDåˆ—è¡¨ -->
  <property>
    <name>yarn.resourcemanager.ha.rm-ids</name>
    <value>rm1,rm2</value>
  </property>
  
  <!-- RMåœ°å€é…ç½® -->
  <property>
    <name>yarn.resourcemanager.hostname.rm1</name>
    <value>node1.example.com</value>
  </property>
  
  <property>
    <name>yarn.resourcemanager.hostname.rm2</name>
    <value>node2.example.com</value>
  </property>
  
  <!-- ZooKeeperé…ç½® -->
  <property>
    <name>yarn.resourcemanager.zk-address</name>
    <value>zk1:2181,zk2:2181,zk3:2181</value>
  </property>
</configuration>
```

## YARNç›‘æ§å’Œè°ƒä¼˜

### 1. å…³é”®æŒ‡æ ‡ç›‘æ§

#### é›†ç¾¤çº§åˆ«æŒ‡æ ‡
- **èµ„æºåˆ©ç”¨ç‡**: CPUã€å†…å­˜ä½¿ç”¨ç‡
- **é˜Ÿåˆ—çŠ¶æ€**: å„é˜Ÿåˆ—çš„èµ„æºåˆ†é…å’Œä½¿ç”¨æƒ…å†µ
- **åº”ç”¨ç»Ÿè®¡**: è¿è¡Œä¸­ã€ç­‰å¾…ä¸­ã€å®Œæˆçš„åº”ç”¨æ•°é‡
- **èŠ‚ç‚¹çŠ¶æ€**: æ´»è·ƒã€ä¸¢å¤±ã€ä¸å¥åº·çš„èŠ‚ç‚¹æ•°é‡

#### åº”ç”¨çº§åˆ«æŒ‡æ ‡
- **åº”ç”¨æ‰§è¡Œæ—¶é—´**: ä»æäº¤åˆ°å®Œæˆçš„æ€»æ—¶é—´
- **èµ„æºç­‰å¾…æ—¶é—´**: ç­‰å¾…èµ„æºåˆ†é…çš„æ—¶é—´
- **å®¹å™¨åˆ†é…æ•ˆç‡**: å®¹å™¨åˆ†é…æˆåŠŸç‡å’Œé€Ÿåº¦
- **ä»»åŠ¡å¤±è´¥ç‡**: ä»»åŠ¡å¤±è´¥å’Œé‡è¯•çš„æ¯”ä¾‹

### 2. æ€§èƒ½è°ƒä¼˜å»ºè®®

#### èµ„æºé…ç½®ä¼˜åŒ–
```bash
# 1. åˆç†è®¾ç½®NodeManagerèµ„æº
# é¢„ç•™ç³»ç»Ÿèµ„æºï¼Œé¿å…è¿‡åº¦åˆ†é…
yarn.nodemanager.resource.memory-mb = ç‰©ç†å†…å­˜ * 0.8
yarn.nodemanager.resource.cpu-vcores = CPUæ ¸å¿ƒæ•° - 1

# 2. ä¼˜åŒ–å®¹å™¨å¤§å°
# é¿å…èµ„æºç¢ç‰‡ï¼Œæé«˜åˆ©ç”¨ç‡
yarn.scheduler.minimum-allocation-mb = 512
yarn.scheduler.increment-allocation-mb = 512

# 3. è°ƒæ•´å¿ƒè·³é—´éš”
# å¹³è¡¡å“åº”æ€§å’Œç½‘ç»œå¼€é”€
yarn.resourcemanager.nodemanagers.heartbeat-interval-ms = 1000
```

#### è°ƒåº¦å™¨ä¼˜åŒ–
```xml
<!-- Capacity Schedulerä¼˜åŒ– -->
<property>
  <name>yarn.scheduler.capacity.resource-calculator</name>
  <value>org.apache.hadoop.yarn.util.resource.DominantResourceCalculator</value>
</property>

<!-- å¯ç”¨æŠ¢å  -->
<property>
  <name>yarn.scheduler.capacity.preemption.enabled</name>
  <value>true</value>
</property>

<!-- å¼‚æ­¥è°ƒåº¦ -->
<property>
  <name>yarn.scheduler.capacity.schedule-asynchronously.enable</name>
  <value>true</value>
</property>
```

## å®é™…åº”ç”¨åœºæ™¯

### 1. å¤šç§Ÿæˆ·ç¯å¢ƒ

```
å¤šç§Ÿæˆ·èµ„æºéš”ç¦»ï¼š
â”œâ”€â”€ ç”Ÿäº§ç¯å¢ƒé˜Ÿåˆ—ï¼ˆ60%èµ„æºï¼‰
â”‚   â”œâ”€â”€ åœ¨çº¿æœåŠ¡ï¼ˆ30%ï¼‰
â”‚   â””â”€â”€ æ‰¹å¤„ç†ä»»åŠ¡ï¼ˆ30%ï¼‰
â”œâ”€â”€ å¼€å‘ç¯å¢ƒé˜Ÿåˆ—ï¼ˆ25%èµ„æºï¼‰
â”‚   â”œâ”€â”€ åŠŸèƒ½æµ‹è¯•ï¼ˆ15%ï¼‰
â”‚   â””â”€â”€ æ€§èƒ½æµ‹è¯•ï¼ˆ10%ï¼‰
â””â”€â”€ ä¸´æ—¶ä»»åŠ¡é˜Ÿåˆ—ï¼ˆ15%èµ„æºï¼‰
    â”œâ”€â”€ æ•°æ®åˆ†æï¼ˆ10%ï¼‰
    â””â”€â”€ ç´§æ€¥ä»»åŠ¡ï¼ˆ5%ï¼‰
```

### 2. æ··åˆå·¥ä½œè´Ÿè½½

```java
// ä¸åŒç±»å‹åº”ç”¨çš„èµ„æºéœ€æ±‚
public class WorkloadManager {
    
    // æ‰¹å¤„ç†ä»»åŠ¡ï¼šé«˜å†…å­˜ï¼Œä½CPU
    public Resource getBatchProcessingResource() {
        return Resource.newInstance(4096, 1);
    }
    
    // å®æ—¶è®¡ç®—ï¼šå‡è¡¡èµ„æº
    public Resource getStreamProcessingResource() {
        return Resource.newInstance(2048, 2);
    }
    
    // æœºå™¨å­¦ä¹ ï¼šé«˜CPUï¼Œé«˜å†…å­˜
    public Resource getMachineLearningResource() {
        return Resource.newInstance(8192, 4);
    }
}
```

### 3. å¼¹æ€§ä¼¸ç¼©

```bash
# åŠ¨æ€æ·»åŠ èŠ‚ç‚¹
yarn rmadmin -addToClusterNodeLabels "gpu=true"
yarn rmadmin -replaceLabelsOnNode "node1:8032=gpu"

# åŠ¨æ€è°ƒæ•´é˜Ÿåˆ—å®¹é‡
yarn rmadmin -refreshQueues

# èŠ‚ç‚¹ç»´æŠ¤æ¨¡å¼
yarn rmadmin -transitionToStandby rm1
```

## æ•…éšœæ’æŸ¥å’Œè¿ç»´

### 1. å¸¸è§é—®é¢˜è¯Šæ–­

#### èµ„æºä¸è¶³
```bash
# æ£€æŸ¥é›†ç¾¤èµ„æºçŠ¶æ€
yarn top
yarn node -list -all

# æ£€æŸ¥é˜Ÿåˆ—çŠ¶æ€
yarn queue -status default

# æ£€æŸ¥åº”ç”¨çŠ¶æ€
yarn application -list -appStates RUNNING
```

#### èŠ‚ç‚¹å¼‚å¸¸
```bash
# æ£€æŸ¥ä¸å¥åº·èŠ‚ç‚¹
yarn node -list -states UNHEALTHY

# æŸ¥çœ‹èŠ‚ç‚¹è¯¦ç»†ä¿¡æ¯
yarn node -status node1:8032

# æ£€æŸ¥NodeManageræ—¥å¿—
tail -f $HADOOP_LOG_DIR/yarn-nodemanager-*.log
```

### 2. æ—¥å¿—åˆ†æ

#### ResourceManageræ—¥å¿—
```bash
# æŸ¥çœ‹RMæ—¥å¿—
tail -f $HADOOP_LOG_DIR/yarn-resourcemanager-*.log

# è¿‡æ»¤ç‰¹å®šåº”ç”¨
grep "application_1234567890123_0001" $HADOOP_LOG_DIR/yarn-resourcemanager-*.log
```

#### ApplicationMasteræ—¥å¿—
```bash
# è·å–AMæ—¥å¿—
yarn logs -applicationId application_1234567890123_0001

# è·å–ç‰¹å®šå®¹å™¨æ—¥å¿—
yarn logs -applicationId application_1234567890123_0001 -containerId container_1234567890123_0001_01_000001
```

## YARNåº”ç”¨ç”Ÿå‘½å‘¨æœŸæµç¨‹å›¾

### å®Œæ•´ç”Ÿå‘½å‘¨æœŸçŠ¶æ€è½¬æ¢å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    YARNåº”ç”¨ç”Ÿå‘½å‘¨æœŸ                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   NEW       â”‚ â† åº”ç”¨åˆ›å»º
    â”‚             â”‚
    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
           â”‚ æäº¤åº”ç”¨
           â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ NEW_SAVING  â”‚ â† ä¿å­˜åº”ç”¨ä¿¡æ¯
    â”‚             â”‚
    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
           â”‚ ä¿¡æ¯ä¿å­˜å®Œæˆ
           â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ SUBMITTED   â”‚ â† åº”ç”¨å·²æäº¤
    â”‚             â”‚
    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
           â”‚ å¼€å§‹è°ƒåº¦
           â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ ACCEPTED    â”‚ â† åº”ç”¨è¢«æ¥å—
    â”‚             â”‚
    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
           â”‚ åˆ†é…AMå®¹å™¨
           â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ RUNNING     â”‚ â† åº”ç”¨è¿è¡Œä¸­
    â”‚             â”‚
    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
           â”‚ åº”ç”¨å®Œæˆ/å¤±è´¥/è¢«æ€æ­»
           â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ FINISHED    â”‚ â† åº”ç”¨ç»“æŸ
    â”‚             â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### åº”ç”¨çŠ¶æ€è¯¦ç»†è¯´æ˜

| çŠ¶æ€ | æè¿° | è§¦å‘æ¡ä»¶ | æŒç»­æ—¶é—´ |
|------|------|----------|----------|
| **NEW** | åº”ç”¨åˆšåˆ›å»ºï¼Œå°šæœªæäº¤ | å®¢æˆ·ç«¯åˆ›å»ºåº”ç”¨ | ç¬æ—¶ |
| **NEW_SAVING** | æ­£åœ¨ä¿å­˜åº”ç”¨ä¿¡æ¯åˆ°çŠ¶æ€å­˜å‚¨ | åº”ç”¨æäº¤å¼€å§‹ | å‡ ç§’é’Ÿ |
| **SUBMITTED** | åº”ç”¨å·²æäº¤ç»™ResourceManager | åº”ç”¨ä¿¡æ¯ä¿å­˜å®Œæˆ | å–å†³äºé˜Ÿåˆ—è´Ÿè½½ |
| **ACCEPTED** | åº”ç”¨è¢«è°ƒåº¦å™¨æ¥å—ï¼Œç­‰å¾…èµ„æºåˆ†é… | è°ƒåº¦å™¨é€‰ä¸­åº”ç”¨ | å–å†³äºèµ„æºå¯ç”¨æ€§ |
| **RUNNING** | ApplicationMasterå·²å¯åŠ¨ï¼Œåº”ç”¨æ­£åœ¨è¿è¡Œ | AMå®¹å™¨å¯åŠ¨æˆåŠŸ | åº”ç”¨æ‰§è¡Œæ—¶é—´ |
| **FINISHED** | åº”ç”¨æ‰§è¡Œå®Œæˆï¼ˆæˆåŠŸ/å¤±è´¥/è¢«æ€æ­»ï¼‰ | åº”ç”¨æ‰§è¡Œç»“æŸ | æ°¸ä¹…çŠ¶æ€ |

#### çŠ¶æ€è½¬æ¢è§¦å‘äº‹ä»¶

- **NEW â†’ NEW_SAVING**: å®¢æˆ·ç«¯è°ƒç”¨`submitApplication()`
- **NEW_SAVING â†’ SUBMITTED**: åº”ç”¨ä¿¡æ¯æˆåŠŸä¿å­˜åˆ°çŠ¶æ€å­˜å‚¨
- **SUBMITTED â†’ ACCEPTED**: è°ƒåº¦å™¨æ ¹æ®ç­–ç•¥é€‰ä¸­åº”ç”¨
- **ACCEPTED â†’ RUNNING**: ApplicationMasterå®¹å™¨æˆåŠŸå¯åŠ¨
- **RUNNING â†’ FINISHED**: åº”ç”¨æ­£å¸¸å®Œæˆã€å¼‚å¸¸ç»ˆæ­¢æˆ–è¢«ç”¨æˆ·æ€æ­»

### è¯¦ç»†ç”Ÿå‘½å‘¨æœŸæµç¨‹å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      åº”ç”¨ç”Ÿå‘½å‘¨æœŸè¯¦ç»†æµç¨‹                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Client    â”‚â”€â”€â”€â–¶â”‚                Step 1                       â”‚
â”‚             â”‚    â”‚              åº”ç”¨æäº¤é˜¶æ®µ                    â”‚
â”‚ â€¢ åº”ç”¨ä»£ç    â”‚    â”‚                                             â”‚
â”‚ â€¢ é…ç½®æ–‡ä»¶   â”‚    â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â€¢ å¯åŠ¨è„šæœ¬   â”‚    â”‚ â”‚åˆ›å»ºåº”ç”¨ä¸Šä¸‹æ–‡â”‚  â”‚æäº¤åˆ°ResourceManager    â”‚ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚ â”‚             â”‚  â”‚                         â”‚ â”‚
                   â”‚ â”‚â€¢ åº”ç”¨åç§°   â”‚  â”‚â€¢ éªŒè¯ç”¨æˆ·æƒé™           â”‚ â”‚
                   â”‚ â”‚â€¢ é˜Ÿåˆ—åç§°   â”‚  â”‚â€¢ æ£€æŸ¥èµ„æºé…é¢           â”‚ â”‚
                   â”‚ â”‚â€¢ èµ„æºéœ€æ±‚   â”‚  â”‚â€¢ åˆ†é…ApplicationId      â”‚ â”‚
                   â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           Step 2                               â”‚
â”‚                    ApplicationMasterå¯åŠ¨                       â”‚
â”‚                                                                 â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚ â”‚   èŠ‚ç‚¹é€‰æ‹©      â”‚    â”‚   å®¹å™¨åˆ†é…      â”‚    â”‚   AMå¯åŠ¨        â”‚â”‚
â”‚ â”‚                 â”‚    â”‚                 â”‚    â”‚                 â”‚â”‚
â”‚ â”‚ â€¢ èµ„æºå¯ç”¨æ€§    â”‚    â”‚ â€¢ å†…å­˜åˆ†é…      â”‚    â”‚ â€¢ ä¸‹è½½åº”ç”¨æ–‡ä»¶  â”‚â”‚
â”‚ â”‚ â€¢ æ•°æ®æœ¬åœ°æ€§    â”‚    â”‚ â€¢ CPUåˆ†é…       â”‚    â”‚ â€¢ è®¾ç½®ç¯å¢ƒå˜é‡  â”‚â”‚
â”‚ â”‚ â€¢ è´Ÿè½½å‡è¡¡      â”‚    â”‚ â€¢ å®‰å…¨ä»¤ç‰Œ      â”‚    â”‚ â€¢ å¯åŠ¨AMè¿›ç¨‹    â”‚â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           Step 3                               â”‚
â”‚                        èµ„æºåå•†é˜¶æ®µ                             â”‚
â”‚                                                                 â”‚
â”‚        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚        â”‚              AMä¸RMäº¤äº’                      â”‚         â”‚
â”‚        â”‚                                             â”‚         â”‚
â”‚        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚         â”‚
â”‚        â”‚  â”‚AMæ³¨å†Œåˆ°RM   â”‚  â”‚è¯·æ±‚å®¹å™¨èµ„æº             â”‚ â”‚         â”‚
â”‚        â”‚  â”‚             â”‚  â”‚                         â”‚ â”‚         â”‚
â”‚        â”‚  â”‚â€¢ æ³¨å†Œä¿¡æ¯   â”‚  â”‚â€¢ èµ„æºéœ€æ±‚è§„æ ¼           â”‚ â”‚         â”‚
â”‚        â”‚  â”‚â€¢ è·å–é›†ç¾¤   â”‚  â”‚â€¢ æœ¬åœ°æ€§åå¥½             â”‚ â”‚         â”‚
â”‚        â”‚  â”‚  çŠ¶æ€ä¿¡æ¯   â”‚  â”‚â€¢ ä¼˜å…ˆçº§è®¾ç½®             â”‚ â”‚         â”‚
â”‚        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚         â”‚
â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           Step 4                               â”‚
â”‚                        ä»»åŠ¡æ‰§è¡Œé˜¶æ®µ                             â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚å®¹å™¨å¯åŠ¨     â”‚  â”‚ä»»åŠ¡æ‰§è¡Œ     â”‚  â”‚çŠ¶æ€ç›‘æ§                 â”‚  â”‚
â”‚  â”‚             â”‚  â”‚             â”‚  â”‚                         â”‚  â”‚
â”‚  â”‚â€¢ è·å–å®¹å™¨   â”‚  â”‚â€¢ ä¸šåŠ¡é€»è¾‘   â”‚  â”‚â€¢ è¿›åº¦è·Ÿè¸ª               â”‚  â”‚
â”‚  â”‚â€¢ å¯åŠ¨ä»»åŠ¡   â”‚  â”‚â€¢ æ•°æ®å¤„ç†   â”‚  â”‚â€¢ èµ„æºç›‘æ§               â”‚  â”‚
â”‚  â”‚â€¢ ç¯å¢ƒè®¾ç½®   â”‚  â”‚â€¢ ç»“æœè¾“å‡º   â”‚  â”‚â€¢ å¼‚å¸¸å¤„ç†               â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           Step 5                               â”‚
â”‚                        åº”ç”¨å®Œæˆé˜¶æ®µ                             â”‚
â”‚                                                                 â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚ â”‚   ä»»åŠ¡æ”¶å°¾      â”‚    â”‚   èµ„æºæ¸…ç†      â”‚    â”‚   çŠ¶æ€æŠ¥å‘Š      â”‚â”‚
â”‚ â”‚                 â”‚    â”‚                 â”‚    â”‚                 â”‚â”‚
â”‚ â”‚ â€¢ ä»»åŠ¡å®Œæˆç¡®è®¤  â”‚    â”‚ â€¢ å®¹å™¨èµ„æºé‡Šæ”¾  â”‚    â”‚ â€¢ æœ€ç»ˆçŠ¶æ€      â”‚â”‚
â”‚ â”‚ â€¢ ç»“æœæ±‡æ€»      â”‚    â”‚ â€¢ ä¸´æ—¶æ–‡ä»¶æ¸…ç†  â”‚    â”‚ â€¢ æ‰§è¡ŒæŠ¥å‘Š      â”‚â”‚
â”‚ â”‚ â€¢ æ—¥å¿—æ”¶é›†      â”‚    â”‚ â€¢ AMæ³¨é”€        â”‚    â”‚ â€¢ é€šçŸ¥Client    â”‚â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## æ€»ç»“

YARNä½œä¸ºHadoopç”Ÿæ€ç³»ç»Ÿçš„èµ„æºç®¡ç†æ ¸å¿ƒï¼Œæä¾›äº†ï¼š

1. **ç»Ÿä¸€èµ„æºç®¡ç†**: æ”¯æŒå¤šç§è®¡ç®—æ¡†æ¶
2. **é«˜å¯æ‰©å±•æ€§**: æ”¯æŒå¤§è§„æ¨¡é›†ç¾¤éƒ¨ç½²
3. **å¤šç§Ÿæˆ·æ”¯æŒ**: æä¾›èµ„æºéš”ç¦»å’Œé…é¢ç®¡ç†
4. **é«˜å¯ç”¨æ€§**: æ”¯æŒResourceManager HA
5. **çµæ´»è°ƒåº¦**: å¤šç§è°ƒåº¦ç­–ç•¥æ»¡è¶³ä¸åŒéœ€æ±‚

æŒæ¡YARNçš„æ¶æ„å’ŒåŸç†ï¼Œå¯¹äºç†è§£å’Œä½¿ç”¨Hadoopç”Ÿæ€ç³»ç»Ÿä¸­çš„å„ç§ç»„ä»¶è‡³å…³é‡è¦ã€‚åœ¨å®é™…åº”ç”¨ä¸­ï¼Œéœ€è¦æ ¹æ®å…·ä½“çš„ä¸šåŠ¡éœ€æ±‚å’Œé›†ç¾¤è§„æ¨¡ï¼Œåˆç†é…ç½®å’Œè°ƒä¼˜YARNå‚æ•°ï¼Œä»¥è·å¾—æœ€ä½³çš„æ€§èƒ½å’Œèµ„æºåˆ©ç”¨ç‡ã€‚